<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Metadb (metadb.Metadb)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">metadb</a> &#x00BB; Metadb</nav><header class="odoc-preamble"><h1>Module <code><span>Metadb</span></code></h1><p><code>Metadb</code> is a library to locally store and manipulate a JSON database of file metadata. A key feature of <code>Metadb</code> is that the user may rename or move files within a library, or move files between directories, and <code>Metadb</code> will resolve missing or renamed files according to their MD5 hash. <code>Metadb</code> can also find duplicate files across libraries.</p><p>A database is composed of one or more libraries, each of which points to a specific directory in the <code>$HOME</code> path. A library may have metadata specified by <a href="module-type-LibData/index.html"><code>LibData</code></a>, such as its version of the type of its entries. Name, path, and metadata of each library is stored as JSON in a configuration file which may be read and written by <a href="Make/index.html#val-load_config"><code>Make.load_config</code></a> and <a href="Make/index.html#val-write_config"><code>Make.write_config</code></a>. For example, such a file may be stored in <code>$HOME/.config/libraries.json</code>.</p><p>Each library assigns a JSON file to each file in its associated directory, for example, consider a library named &quot;documents&quot; that points to a directory <code>~/Documents/Articles</code> and suppose the following files are contained in this library:</p><p><code>~/Documents/Articles/</code></p><ul><li><code>article1.pdf</code></li><li><code>article2.djvu</code></li><li><code>path/to/article3.pdf</code></li></ul><p>Then <code>Metadb</code> will store metadata for each file specified by <a href="module-type-Metadata/index.html"><code>Metadata</code></a> in a hidden directory <code>./.metadata</code>: <code>~/Documents/Articles/.metadata</code></p><ul><li><code>article1.pdf.json</code></li><li><code>article2.djvu.json</code></li><li><code>path/to/article3.pdf.json</code></li></ul><p>The key to an entry or file in a library is always given by its <a href="Path/index.html#type-rel">relative path</a> with respect to the library's <a href="Make/index.html#val-get_library_root">root path</a>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception" id="exception-FileExists" class="anchored"><a href="#exception-FileExists" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">FileExists</span> <span class="keyword">of</span> <a href="Path/index.html#type-root">Path.root</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-EntryExists" class="anchored"><a href="#exception-EntryExists" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">EntryExists</span> <span class="keyword">of</span> string * <a href="Path/index.html#type-rel">Path.rel</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-EntryDoesNotExist" class="anchored"><a href="#exception-EntryDoesNotExist" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">EntryDoesNotExist</span> <span class="keyword">of</span> string * <a href="Path/index.html#type-rel">Path.rel</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-DirNotEmpty" class="anchored"><a href="#exception-DirNotEmpty" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">DirNotEmpty</span> <span class="keyword">of</span> <a href="Path/index.html#type-root">Path.root</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-LibraryExists" class="anchored"><a href="#exception-LibraryExists" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">LibraryExists</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Path" class="anchored"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Path/index.html">Path</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Path/index.html">Path</a></span></code></div><div class="spec-doc"><p>A minimal library for manipulating typed representations of paths</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Hash" class="anchored"><a href="#module-Hash" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Hash/index.html">Hash</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Hash/index.html">Hash</a></span></code></div><div class="spec-doc"><p>This is a wrapper for the standard <a href="https://v2.ocaml.org/api/Digest.html"><code>Digest</code></a> library.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Json" class="anchored"><a href="#module-Json" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Json/index.html">Json</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Json/index.html">Json</a></span></code></div><div class="spec-doc"><p>This is a wrapper for the <a href="https://ocaml-community.github.io/yojson/yojson/index.html"><code>Yojson</code></a> library</p></div></div><div class="odoc-spec"><div class="spec module" id="module-System" class="anchored"><a href="#module-System" class="anchor"></a><code><span><span class="keyword">module</span> <a href="System/index.html">System</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="System/index.html">System</a></span></code></div><div class="spec-doc"><p>This is a wrapper for the standard <a href="https://v2.ocaml.org/api/Sys.html"><code>Sys</code></a> library.</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-Metadata" class="anchored"><a href="#module-type-Metadata" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Metadata/index.html">Metadata</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Metadata to be associated to each file in a library</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-LibData" class="anchored"><a href="#module-type-LibData" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-LibData/index.html">LibData</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Metadata associated to each library</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Make" class="anchored"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-D/index.html">D</a> : <a href="module-type-Metadata/index.html">Metadata</a>) (<a href="Make/argument-2-LD/index.html">LD</a> : <a href="module-type-LibData/index.html">LibData</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Make a <code>Metadb</code> database</p></div></div></div></body></html>